<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ca.usherbrooke.gegi.server.persistence.LogMapper">
    <insert id="insertArticleUserLog" parameterType="ca.usherbrooke.gegi.server.business.log.ArticleUserLog"
            useGeneratedKeys="true" keyProperty="log.action_timestamp" keyColumn="action_timestamp">
        INSERT INTO astanble.article_user_interaction_log(
            cip,
            id_article,
            id_type,
            id_field)
        VALUES  (#{log.cip},
                 #{log.id_article},
                 #{log.id_type},
                 #{log.id_field});
    </insert>
    <insert id="insertQuizUserLog" parameterType="ca.usherbrooke.gegi.server.business.log.QuizUserLog"
            useGeneratedKeys="true" keyProperty="log.action_timestamp" keyColumn="action_timestamp">
        INSERT INTO astanble.quiz_user_interaction_log(
            cip,
            id_quiz,
            <if test="log.id_question != 0">
                id_question,
            </if>
            id_type,
            id_field)
        VALUES  (#{log.cip},
                 #{log.id_quiz},
                <if test="log.id_question != 0">
                    #{log.id_question},
                </if>
                 #{log.id_type},
                 #{log.id_field});
    </insert>
    <insert id="insertUserUserLog" parameterType="ca.usherbrooke.gegi.server.business.log.UserLog"
            useGeneratedKeys="true" keyProperty="log.action_timestamp" keyColumn="action_timestamp">
        INSERT INTO astanble.user_profil_interaction_log(
        cip,
        context_user_cip,
        id_type,
        id_field)
        VALUES  (#{log.cip},
                #{log.id_quiz}
                #{log.id_type},
                #{log.id_field});
    </insert>
</mapper>
